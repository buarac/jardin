// This Prisma schema defines the data model for the Ba≈°touille application.
// To apply changes to your database run `npx prisma migrate dev` after setting
// the DATABASE_URL environment variable in a `.env` file.

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model culture {
  id String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nom         String
  img         String?
  categorie   categorie   @default(legume)
  mode_recolte moderecolte @default(poids)
  recoltes    recolte[]
}

model recolte {
  id          Int       @id @default(autoincrement())
  culture     culture   @relation(fields: [id_culture], references: [id])
  id_culture  String    @db.Uuid
  date        DateTime
  poids       Int
  quantite    Int?
  quantite_fiable Boolean @default(false)
}

enum categorie {
  fruit
  legume
  aromatique
  fleur
}

enum moderecolte {
  poids
  poids_unite
}

enum job_status {
  OK
  KO
  IGNORED
  PARTIAL
  PENDING
}

model meteo_jour {
  id              Int      @id @default(autoincrement())
  date            DateTime @unique
  temperature_min Float
  temperature_max Float
  humidite        Float
  vent            Float
  indice_uv       Float
  qte_pluie       Float
  sunshine        Float
  sunrise         DateTime
  sunset          DateTime
  source          String   @default("Open-Meteo")
  weather_code    Int
}

model log_jobs {
  id         Int       @id @default(autoincrement())
  job_name   String
  started_at DateTime
  ended_at   DateTime?
  status     job_status
  message    String?
  log        String?
}

model recipient {
  id     String @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  nom    String
  img    String?
  poids  Int
}
